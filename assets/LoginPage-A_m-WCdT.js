import{r,j as o,u as z,c as A,a as b,s as U}from"./index-Du7RY76N.js";import{M as B,i as W,u as M,P as F,a as D,b as H,L as K,m as Z}from"./proxy-yu1xXn4L.js";function N(e,i){if(typeof e=="function")return e(i);e!=null&&(e.current=i)}function G(...e){return i=>{let t=!1;const a=e.map(l=>{const n=N(l,i);return!t&&typeof n=="function"&&(t=!0),n});if(t)return()=>{for(let l=0;l<a.length;l++){const n=a[l];typeof n=="function"?n():N(e[l],null)}}}}function Q(...e){return r.useCallback(G(...e),e)}class V extends r.Component{getSnapshotBeforeUpdate(i){const t=this.props.childRef.current;if(t&&i.isPresent&&!this.props.isPresent){const a=t.offsetParent,l=W(a)&&a.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=l-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function X({children:e,isPresent:i,anchorX:t,root:a}){const l=r.useId(),n=r.useRef(null),c=r.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:m}=r.useContext(B),w=Q(n,e?.ref);return r.useInsertionEffect(()=>{const{width:u,height:y,top:d,left:h,right:g}=c.current;if(i||!n.current||!u||!y)return;const x=t==="left"?`left: ${h}`:`right: ${g}`;n.current.dataset.motionPopId=l;const f=document.createElement("style");m&&(f.nonce=m);const R=a??document.head;return R.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${y}px !important;
            ${x}px !important;
            top: ${d}px !important;
          }
        `),()=>{R.contains(f)&&R.removeChild(f)}},[i]),o.jsx(V,{isPresent:i,childRef:n,sizeRef:c,children:r.cloneElement(e,{ref:w})})}const _=({children:e,initial:i,isPresent:t,onExitComplete:a,custom:l,presenceAffectsLayout:n,mode:c,anchorX:m,root:w})=>{const u=M(q),y=r.useId();let d=!0,h=r.useMemo(()=>(d=!1,{id:y,initial:i,isPresent:t,custom:l,onExitComplete:g=>{u.set(g,!0);for(const x of u.values())if(!x)return;a&&a()},register:g=>(u.set(g,!1),()=>u.delete(g))}),[t,u,a]);return n&&d&&(h={...h}),r.useMemo(()=>{u.forEach((g,x)=>u.set(x,!1))},[t]),r.useEffect(()=>{!t&&!u.size&&a&&a()},[t]),c==="popLayout"&&(e=o.jsx(X,{isPresent:t,anchorX:m,root:w,children:e})),o.jsx(F.Provider,{value:h,children:e})};function q(){return new Map}const E=e=>e.key||"";function k(e){const i=[];return r.Children.forEach(e,t=>{r.isValidElement(t)&&i.push(t)}),i}const J=({children:e,custom:i,initial:t=!0,onExitComplete:a,presenceAffectsLayout:l=!0,mode:n="sync",propagate:c=!1,anchorX:m="left",root:w})=>{const[u,y]=D(c),d=r.useMemo(()=>k(e),[e]),h=c&&!u?[]:d.map(E),g=r.useRef(!0),x=r.useRef(d),f=M(()=>new Map),[R,P]=r.useState(d),[s,j]=r.useState(d);H(()=>{g.current=!1,x.current=d;for(let C=0;C<s.length;C++){const p=E(s[C]);h.includes(p)?f.delete(p):f.get(p)!==!0&&f.set(p,!1)}},[s,h.length,h.join("-")]);const L=[];if(d!==R){let C=[...d];for(let p=0;p<s.length;p++){const v=s[p],S=E(v);h.includes(S)||(C.splice(p,0,v),L.push(v))}return n==="wait"&&L.length&&(C=L),j(k(C)),P(d),null}const{forceRender:I}=r.useContext(K);return o.jsx(o.Fragment,{children:s.map(C=>{const p=E(C),v=c&&!u?!1:d===s||h.includes(p),S=()=>{if(f.has(p))f.set(p,!0);else return;let $=!0;f.forEach(T=>{T||($=!1)}),$&&(I?.(),j(x.current),c&&y?.(),a&&a())};return o.jsx(_,{isPresent:v,initial:!g.current||t?void 0:!1,custom:i,presenceAffectsLayout:l,mode:n,root:w,onExitComplete:v?void 0:S,anchorX:m,children:C},p)})})},ee=()=>{const[e,i]=r.useState(""),[t,a]=r.useState(""),[l,n]=r.useState(""),[c,m]=r.useState(!1),[w,u]=r.useState("Sign Up"),[y,d]=r.useState(!1),h=z(),g=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),x=s=>/^(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(s),f=async()=>{if(!g(e))return alert("Enter a valid email.");if(!x(t))return alert("Password must be 8+ chars, 1 uppercase, 1 number, 1 special char.");if(t!==l)return alert("Passwords do not match!");try{d(!0),await A(b,e,t),i(""),a(""),n(""),u("âœ… Registered!"),setTimeout(()=>{m(!1),u("Sign Up")},2e3)}catch(s){alert(s.message)}finally{d(!1)}},R=async()=>{try{await U(b,e,t),console.log(`Logged in: ${e}`),h("/hero")}catch(s){alert(s.message)}},P=[{label:"Email",type:"text",value:e,onChange:s=>i(s.target.value)},{label:"Password",type:"password",value:t,onChange:s=>a(s.target.value)}];return c&&P.push({label:"Re-enter Password",type:"password",value:l,onChange:s=>n(s.target.value)}),o.jsx("div",{className:"login",children:o.jsx("div",{className:"loginBox",children:o.jsx(J,{mode:"wait",children:o.jsxs(Z.div,{className:"loginBox",initial:{opacity:0,x:c?40:-40},animate:{opacity:1,x:0},exit:{opacity:0,x:c?-40:40},transition:{duration:.3},children:[o.jsx("h1",{className:"loginText",children:c?"Sign Up":"Login"}),P.map((s,j)=>o.jsx("input",{type:s.type,className:s.type==="password"?"password":"username",placeholder:`Enter ${s.label}`,value:s.value,onChange:s.onChange},j)),o.jsx("button",{className:"loginButton",onClick:c?f:R,disabled:y,children:c?w:"Login"}),o.jsx("div",{className:"signupQues",children:c?o.jsxs(o.Fragment,{children:["Already have an account?"," ",o.jsx("span",{className:"signupLink",onClick:()=>m(!1),children:"Login"})]}):o.jsxs(o.Fragment,{children:["Not a user?"," ",o.jsx("span",{className:"signupLink",onClick:()=>m(!0),children:"Sign up"})]})})]},c?"signup":"login")})})})};export{ee as default};
